
poEdit je GUI editor pøekladových katalogù pro systém GNU gettext 
(http://freshmeat.net/projects/gettext/). Gettextové katalogy jsou textové
soubory obsahující dvojice originální øetìzec-pøeklad, kde originální øetìzec 
je typicky v angliètinì. Program vyu¾ívající gettext tyto katalogy naète za bìhu 
a získává voláním funkce char *gettext(const char *original_string), která v
hashovací tabulce najde a vrátí pøíslu¹ný pøeklad.

 
 Souèasný stav:
================
(verze 1.0.3; http://www.volny.cz/v.slavik/poedit/)

Editace katalogu probíhá v hlavním oknì, rozdìleném na dvì èásti: v horní je 
seznam v¹ech øetìzcù a jejich pøekladù (vèetnì barevného zvýraznìní stavu 
pøekladu: hotový, ¾ádný, nepøesný), v dolní èásti jsou pod sebou dva widgety 
pro vstup textu. V horním z nich je originální text, v dolním u¾ivatel edituje
pøeklad.

Funce:

zvýraznìní bílých znakù
        text lze volitelnì zobrazovat v uvozovkách, aby si pøekladatel v¹iml
        úvodních nebo koncových mezer

setøízení seznamu pøekladù
        nepøelo¾ené texty jsou v seznamu pøekladù nahoøe, pod nimi jsou nepøesné
        (fuzzy) a následují hotové pøeklady

automatické generování MO souborù
        (MO je binární podoba standardních textových katalogù PO)
        pøi ulo¾ení katalogu se (volitelnì) vygeneruje i MO (pomocí externího
        programu)
        
editování hlavièek
        k dispozici je dialog k nastavování hlavièek katalogu (pøekladatel, 
        jazyk, poslední update, ...)
        
prohlí¾ení referencí
        po kliknutí pravým tlaèítkem my¹i na øetìzec v seznamu se objeví menu
        s výètem v¹ech míst ve zdrojových kódech, kde se pøíslu¹ný øetìzec
        vyskytuje. Po vybrání reference se zobrazí relevantní èást zdrojáku

updatování katalogù
        v poEditu je integrovaná funkce pro aktualizaci katalogù ze zdrojových
        kódù (vyu¾ívá externí parser dodávaný s GNU gettextem). Po dokonèení
        aktualizace program zobrazí seznam zmìn


Jazyk: C++
Platformy: Windows, Unix; s vyu¾itím knihovny wxWindows



 Pøidané funkce (jako roèníkový projekt):
==========================================

podpora Unicode
        poEdit bude internì pracovat s wchar_t k podporovaným kódováním
        .po souborù pøibude UTF-8.

vylep¹ený prohlí¾eè zdrojákù
        (k danému øetìzci zobrazuje èást zdrojového kódu, která jej
        obsahuje)
        bude zobrazovat èísla øádkù, v toolbaru bude tlaèítko k otevøení
        souboru v externím editoru a combo box se seznamem v¹ech výskytù
        daného øetìzce, aby se mezi nimi dalo rychle pøecházet

komentáøe 
        poEdit bude umo¾òovat k pøekladùm pøidat komentáøe a pøítomnost
        komentáøù bude v seznamu indikovat ikonkou

ukazatel prùbìhu pøekladu
       v toolbaru bude progress bar, který ukazuje pomìr pøelo¾ených
       a nepøelo¾ených øetìzcù v katalogu

nové editování textù
       souèasné editování pøekladù v jednoøádkovém textovém prvku bude
       nahrazeno víceøádkovým a pøechod mezi jednotlivými pøeklady se zmìní
       z kláves Up, Down na Ctrl-Up, Ctrl-Down
       
mana¾er katalogù
       mana¾er zobrazí okno se seznamem v¹ech katalogù nalezených v nastavené
       cestì vèetnì jejich statistik, umo¾ní jednotlivé katalogy otevírat
       a provést masový update (aktualizace obsahu v¹ech katalogù z pøíslu¹ných
       zdrojových kódù)

automatický pøeklad
       poEdit umo¾ní volitelnì pøi aktualizaci katalogu doplnit prázdné pøeklady
       z databáze známých pøekladù. Tato databáze vzniká automaticky pøi práci
       s poEditem nebo je ji mo¾no vygenerovat ze souborù nalezených na disku.
       Pøi doplòování se v db hledá jednak pøesný výskyt øezìzce, jednak
       výskyt nepøesný (s ignorováním bílých znakù a interpunkce, navíc dovolíme
       jedno nebo dvì odli¹ná slova).


 Algoritmus automatického pøekladu:
====================================

0. Ulo¾ení dat

Data budou ulo¾ena v databázi typu key-value, zøejmì Berkeley DB nebo jiné
volnì dostupné implementaci. Databáze bude existovat zvlá¹» pro 
ka¾dý cílový jazyk. Jazyk originálu se v souladu s principem Gettextu 
pøedpokládá angliètina. Data jsou v databázi ulo¾ena v kódování UTF-8.

Struktura tabulek:
    1: tabulka pøekladù -- klíèem je originální øetìzec v pùvodní podobì, 
           hodnotou je seznam pøekladù (tìch toti¾ typicky existuje více)
    2: tabulka indexù pøekladù -- klíèem je long int, hodnotou je originální 
           øetìzec (klíè pro tabulku 1).
    3: tabulka slov -- klíèem je slovo, hodnotou je seznam indexù originálních
           øetìzcù, v nich¾ se dané slovo vyskytuje (klíèe pro tabulku 2).


1. Generování databáze

Pro ka¾dou vstupní dvojici originál-pøeklad se provedou následující kroky:
    - pokud v tabulce 1 neexistuje záznam s klíèem originál, pak
          - vytvoøí se pøíslu¹ný záznam v tabulce 1
          - do tabulky 2 se pøidá 
          - øetìzec originál se rozlo¾í na jednotlivá slova a do tabulky 
            3 se ke ka¾dému slovu pøidá odkaz na novì vzniklý záznam v tabulce
            1 (pøíslu¹né záznamy pro slova se vytvoøí, pokud chybìly)
    - do záznamu v tabulce 1 se pøidá pøeklad a to na zaèátek seznamu pøekladù
      (tak¾e novìj¹í pøeklady budou mít pøednost pøi dotazování do db)


2. Dotazování databáze

(Pozn.: dotazování probíhá ve dvou módech: interaktivním a automatickém.
V automatickém módu se pod "nabídnout u¾ivateli" rozumí vybrat první z 
nalezených výsledkù a pou¾ít ho, v interaktivním módu se v pøípadì více ne¾
jednoho výsledku v¹echny zobrazí a u¾ivatel si vybere. Automatický mód se
pou¾ije pøi automatickém pøekladu databáze, interaktivní, kdy¾ potom u¾ivatel 
pøeklady opravuje.)

V prvním kroku se algoritmus podívá do tabulky 1 a pokud v ní najde dotazovaný
klíè, nabídne v nìm ulo¾ené pøeklady. 

Pokud pøesný pøeklad neexistuje, rozlo¾í se vstup na jednotlivá slova. Ke 
ka¾dému slovu z tabulky 3 zjistím mno¾inu indexù pøekladù, v nich¾ se pøíslu¹né
slovo vyskytuje.

Udìlá se prùnik tìchto mno¾in. Pokud bude neprázdný, zjistí se z tabulky 2
originální øetìzce. Ovìøí se, ¾e neobsahují ¾ádná slova navíc k tìm, které 
jsme hledali. K tìm originálùm, které pøedchozímu testu vyhovìly, se z tabulky
1 vyjmou pøeklady a nabídnou se u¾ivateli.

V opaèném pøípadì se pro ka¾dé slovo vytvoøí prùnik mno¾in indexù v¹ech slov
originálního øetìzce _bez tohoto slova_. Pokud je sjednocení tìchto prùnikù
neprázdné, nabídne se u¾ivateli (opìt pøedním odfiltrujeme originály, které
obsahují dvì a více slov navíc oproti hledaným).

V opaèném pøípadì se toté¾ opakuje s vynecháním v¹ech dvojic slov.


    
    

